"use strict";function getRandomColors(){for(var t="0123456789ABCDEF".split(""),a="#",e=0;6>e;e++)a+=t[Math.floor(16*Math.random())];return a}function getFirstAndLastName(t){var a=t.split(" ");if(a&&a.length>=2){var e=a[0],r=a[1];if(e&&r){var o=e.substr(0,1)+r.substr(0,1);return o}return t.substr(0,2)}}function getImgTag(t,a,e){var r=angular.element("<svg></svg>").attr({xmlns:"http://www.w3.org/2000/svg","pointer-events":"none",width:t,height:a}).css({"background-color":e,width:t+"px",height:a+"px"});return r}function getCharacterObject(t,a,e,r,o){var n=angular.element('<text text-anchor="middle"></text>').attr({y:"50%",x:"50%",dy:"0.35em","pointer-events":"auto",fill:a,"font-family":e}).html(t).css({"font-weight":r,"font-size":o+"px"});return n}var nla=angular.module("ngLetterAvatar",[]);nla.constant("defaultSettings",{alphabetcolors:["#5A8770","#B2B7BB","#6FA9AB","#F5AF29","#0088B9","#F18636","#D93A37","#A6B12E","#5C9BBC","#F5888D","#9A89B5","#407887","#9A89B5","#5A8770","#D33F33","#A2B01F","#F0B126","#0087BF","#F18636","#0087BF","#B2B7BB","#72ACAE","#9C8AB4","#5A8770","#EEB424","#407887"],textColor:"#ffffff",defaultBorder:"border:5px solid white",triangleup:"width: 0;height: 0;border-left: 50px solid transparent;border-right: 50px solid transparent;border-bottom: 100px solid;",fontsize:30,height:50,width:50,fontWeight:400,charCount:1,fontFamily:"HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica, Arial,Lucida Grande, sans-serif",base:"data:image/svg+xml;base64,",radius:"border-radius:50%;",custombgcolor:"",dynamic:"false",rotatedeg:"0"}),nla.directive("ngLetterAvatar",["defaultSettings",function(t){return{restrict:"AE",replace:!0,scope:{alphabetcolors:"=alphabetcolors",data:"@"},link:function(a,e,r){function o(){var r="";if(2==n.charCount){var o=getFirstAndLastName(a.data.toUpperCase());r=o?o:a.data.substr(0,n.charCount).toUpperCase()}else r=a.data.substr(0,n.charCount).toUpperCase();var i=getCharacterObject(r,n.textColor,n.fontFamily,n.fontWeight,n.fontsize),l="",s="";r.charCodeAt(0)<65?s=getRandomColors():(l=Math.floor((r.charCodeAt(0)-65)%n.alphabetcolors.length),s=n.alphabetcolors[l]),n.avatarCustomBGColor&&(s=n.avatarCustomBGColor);var d=getImgTag(n.width,n.height,s);d.append(i);var h,c=angular.element("<div>").append(d.clone()).html(),g=window.btoa(unescape(encodeURIComponent(c))),u=t.base,f="";if(n.avatarBorderStyle?f=n.avatarBorderStyle:n.avatardefaultBorder&&(f=n.defaultBorder),"0"!=n.rotatedeg&&(f="-ms-transform: rotate("+n.rotatedeg+"deg); -webkit-transform: rotate("+n.rotatedeg+"deg); transform: rotate("+n.rotatedeg+"deg)"),n.shape){if("round"===n.shape){var m=t.radius+f;h="<img src="+u+g+" style='"+m+"' title='"+a.data+"' />"}}else h="<img src="+u+g+" style='"+f+"' title='"+a.data+"' />";"true"===n.dynamic?(e.empty(),e.append(h)):e.replaceWith(h)}var n={charCount:r.charcount||t.charCount,data:r.data,textColor:t.textColor,height:r.height||t.height,width:r.width||t.width,fontsize:r.fontsize||t.fontsize,fontWeight:r.fontweight||t.fontWeight,fontFamily:r.fontfamily||t.fontFamily,avatarBorderStyle:r.avatarcustomborder,avatardefaultBorder:r.avatarborder,defaultBorder:t.defaultBorder,shape:r.shape,alphabetcolors:a.alphabetcolors||t.alphabetcolors,avatarCustomBGColor:r.avatarcustombgcolor||t.custombgcolor,dynamic:r.dynamic||t.dynamic,rotatedeg:r.rotatedeg||t.rotatedeg};"true"===n.dynamic?a.$watch("data",function(){o()}):o()}}}]);